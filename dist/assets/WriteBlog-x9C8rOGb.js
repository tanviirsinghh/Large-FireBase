import{r as s,j as e,u as y,y as l,f as k}from"./index-DnAP2V4g.js";import{L as C,C as L,B as S,a as E,E as I}from"./Editor-BhlMtUxd.js";import{a as b,B as _}from"./axios-DjXiXPf6.js";import{N as P}from"./Navbar-DXW0RdLE.js";import{u as R}from"./ImageUploadHook-C0jzvrCB.js";import{F as A}from"./Footer-Bwl6TTWT.js";import{C as x}from"./circle-check-HFkFSw-l.js";import"./createLucideIcon-C5J-et0N.js";import"./utils-w7soFv3E.js";import"./proxy-BiyE_pyU.js";const U=({getImgFile:i})=>{const[a,f]=s.useState(null),[r,c]=s.useState(void 0),d=o=>{if(o.target&&o.target.files&&o.target.files[0]){const n=o.target.files[0];i(n),f(n),r&&URL.revokeObjectURL(r);const h=URL.createObjectURL(n);c(h)}};return e.jsx("div",{className:" w-full h-full flex justify-center items-end ",children:e.jsx("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center",children:e.jsxs("div",{className:"w-full relative border-2  border-gray-300 rounded-lg overflow-hidden",style:{width:"80%",height:"160px"},children:[a?e.jsxs("div",{className:"absolute inset-0 w-full h-full bg-black",children:[e.jsx("img",{src:r,alt:"Blog",className:"w-full h-full object-fill"}),e.jsxs("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity duration-300 cursor-pointer absolute inset-0",children:[e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),e.jsx("p",{className:"mt-2 text-sm text-white",children:"Click to change image"})]})]}):e.jsx("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-full border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-black hover:bg-neutral-900",children:e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx("svg",{className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})}),e.jsx("input",{id:"dropzone-file",type:"file",onChange:d,className:"hidden",accept:"image/*"})]})})})};function B(){const[i,a]=s.useState(!0);return e.jsx("div",{children:e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(C,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Writing Tips"]}),e.jsx("button",{onClick:()=>a(!i),className:"text-gray-400 hover:text-gray-600",children:e.jsx(L,{className:"w-5 h-5"})})]}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(x,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Engaging Title"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Keep it clear, specific, and intriguing"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(S,{className:"w-5 h-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Structure"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Use headings and short paragraphs"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{className:"w-5 h-5 text-indigo-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Visual Appeal"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add relevant images to enhance your story"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Ready to Publish?"}),e.jsxs("ul",{className:"space-y-3 text-sm",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Your story will be shared with our community"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Engage with readers through comments"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Track your story's performance"]})]})]})]})})})}function W(){const i=s.useRef(null),a=y(),[f,r]=s.useState(!1),c=localStorage.getItem("token"),[d,o]=s.useState(""),[n,h]=s.useState(""),[p,j]=s.useState(null),g=s.useRef(null);s.useEffect(()=>{if(!c){l.info("Log In or Create Account First"),a("/publish");return}},[a,c]),s.useEffect(()=>{var t;(t=g.current)==null||t.focus()},[]);const w=t=>{j(t)},v=async()=>{if(r(!0),!d&&!n){l.error("Title and Description cannot be empty"),r(!1);return}try{const t=p?await R(p):"";if(!t&&p){l.error("Image upload failed. Cannot proceed.");return}await N(t||"")}catch(t){console.error("Error in handleSubmit:",t),l.error("An unexpected error occurred. Please try again.")}},N=async t=>{var m;try{const u=await b.post(`${_}/api/v1/blog`,{title:d,content:n,url:t||" "},{headers:{Authorization:localStorage.getItem("token")}});l.success("Blog Posted Successfully"),r(!1),a(`/blog/${u.data.id}`)}catch(u){if(b.isAxiosError(u))switch((m=u.response)==null?void 0:m.status){case 500:l.error("Please try again / Internal Server Error"),r(!1);break;case 411:l.error("Input Not Correct"),r(!1);break;default:l.error("An unexpected error occurred"),r(!1)}}};return f?e.jsx("div",{className:"h-screen bg-black w-full flex justify-center items-center",children:e.jsx(k,{variant:"spokes",color:"#3e43ef",size:"medium",text:"",textColor:""})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-full w-full flex flex-col justify-center items-center bg-black ",children:[e.jsx(P,{}),e.jsx("div",{className:"h-24 "}),e.jsxs("div",{className:"relative flex justify-center items-center  w-full h-full md:flex",children:[e.jsxs("div",{className:`   p-8 w-full  border border-indigo-500/70   rounded-md md:w-3/5\r
       shadow-[0_0_15px_rgba(255,255,255,0.2)] \r
    hover:shadow-[0_0_20px_rgba(255,255,255,0.25)] \r
    transition-shadow duration-300 ease-in-out`,children:[e.jsx("div",{className:"w-full h-44 flex justify-center ",children:e.jsx(U,{getImgFile:w})}),e.jsx("div",{className:"flex justify-center items-center h-32 w-full px-4 sm:px-6 lg:px-8 ",children:e.jsx("div",{className:"w-full max-w-5xl",children:e.jsx("input",{ref:g,onChange:t=>{o(t.target.value)},type:"text",autoFocus:!0,className:"w-full bg-transparent text-4xl font-bold text-gray-300  placeholder-gray-300  bg-black focus:outline-none focus:ring-0",placeholder:"Title"})})}),e.jsx("div",{className:"  flex justify-center items-center  px-4 sm:px-6 lg:px-8 ",children:e.jsx(I,{apiKey:`s73wk7i6fwr11ew23vudqfd79tjyajof2inq6b6qg8a9c9x6\r
`,onInit:(t,m)=>i.current=m,init:{height:700,width:"100%",menubar:!0,plugins:["advlist","autolink","lists","link","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px; background-color: #000000 !important; color: #ffffff !important; } .mce-content-body { background-color: #000000 !important; } .tox-menubar { background-color: #000000 !important; } .tox-toolbar { background-color: #000000 !important; } .tox-toolbar__primary { background-color: #000000 !important; } .tox-menubar button { color: #ffffff !important; }",skin:"oxide-dark",content_css:"dark",toolbar_bg:"#000000",toolbar_text_color:"#ffffff"},onEditorChange:t=>h(t)})}),e.jsx("div",{className:"w-full h-inherit  flex justify-center items-end h-32 ",children:e.jsxs("button",{onClick:v,type:"submit",className:"px-5 py-2.5 relative rounded group  text-white font-medium inline-block",children:[e.jsx("span",{className:"absolute top-0 left-0 w-full h-full rounded opacity-50 filter blur-sm bg-gradient-to-br from-purple-600 to-blue-500"}),e.jsx("span",{className:"h-full w-full inset-0 absolute mt-0.5 ml-0.5 bg-gradient-to-br filter group-active:opacity-0 rounded opacity-50 from-purple-600 to-blue-500"}),e.jsx("span",{className:"absolute inset-0 w-full h-full transition-all duration-200 ease-out rounded shadow-xl bg-gradient-to-br filter group-active:opacity-0 group-hover:blur-sm from-purple-600 to-blue-500"}),e.jsx("span",{className:"absolute inset-0 w-full h-full transition duration-200 ease-out rounded bg-gradient-to-br to-purple-600 from-blue-500"}),e.jsx("span",{className:"relative",children:"Publish Post"})]})})]}),e.jsx("div",{className:"pl-9  hidden md:block  h-[58rem] w-1/4  ",children:e.jsx("div",{className:" w-full h-screen sticky top-20 ",children:e.jsx(B,{})})})]})]}),e.jsxs("div",{className:"h-96  bg-black",children:[e.jsx("div",{className:"h-36"}),e.jsx(A,{})]})]})}export{W as default};
