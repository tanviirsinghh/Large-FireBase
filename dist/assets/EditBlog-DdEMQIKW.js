import{r as i,a as L,u as A,j as e,d as F,y as r}from"./index-DnAP2V4g.js";import{E as R,L as U,C as D,B as z,a as H}from"./Editor-BhlMtUxd.js";import{u as $}from"./ImageUploadHook-C0jzvrCB.js";import{a as x,B as N}from"./axios-DjXiXPf6.js";import{p as q}from"./purify.es-Bq0E5Q3l.js";import{N as M}from"./Navbar-DXW0RdLE.js";import{F as V}from"./Footer-Bwl6TTWT.js";import{X as G}from"./x-BRUuEVsg.js";import{c as K}from"./createLucideIcon-C5J-et0N.js";import{C as u}from"./circle-check-HFkFSw-l.js";import"./utils-w7soFv3E.js";import"./proxy-BiyE_pyU.js";/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=K("ImagePlus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);function ie(){const[p,g]=i.useState("write"),[b,w]=i.useState(!0),[c,a]=i.useState(!1),k=L(),{blog:l}=k.state,[d,C]=i.useState(l.title),[m,S]=i.useState(l.content),[h,j]=i.useState(null),[n,f]=i.useState(void 0),E=i.useRef(null),v=A(),_=()=>{f(void 0),j(null),l.url=""};i.useEffect(()=>{l.url&&f(l.url)},[]);const y=t=>{if(t.target&&t.target.files&&t.target.files[0]){const s=t.target.files[0];j(s),n&&URL.revokeObjectURL(n);const o=URL.createObjectURL(s);f(o)}},I=t=>{t.preventDefault(),T()},T=async()=>{if(a(!0),!d&&!m){r.error("Title and Description cannot be empty"),a(!1);return}try{const t=h?await $(h):"";if(!t&&h){r.error("Image upload failed. Cannot proceed."),a(!1);return}await B(t||"")}catch(t){console.error("Error in handleSubmit:",t),r.error("An unexpected error occurred. Please try again."),a(!1)}},B=async t=>{var s;try{const o=await x.put(`${N}/api/v1/blog/editedblog/${l.id}`,{title:d,content:m,id:l.id,url:t||l.url||" "},{headers:{Authorization:localStorage.getItem("token")}});o&&o.data&&(r.success("Blog Edited Successfully"),a(!1),v(`/blog/${o.data.id}`))}catch(o){if(x.isAxiosError(o))switch((s=o.response)==null?void 0:s.status){case 500:r.error("Token not Verified / Internal Server Error");break;case 411:r.error("Input Not Correct");break;default:r.error("Server Error")}a(!1)}},P=async()=>{var t;a(!0);try{const s=await x.delete(`${N}/api/v1/blog/deleteblog/${l.id}`,{headers:{Authorization:localStorage.getItem("token")}});s&&s.data&&(r.success("Blog Deleted Successfully"),a(!1),v("/blogs"))}catch(s){if(x.isAxiosError(s))switch((t=s.response)==null?void 0:t.status){case 401:r.error("Token not Found ");break;case 400:r.error("Blog Id incorrect");break;case 411:r.error("Token Not verified");break;case 500:r.error("Internal Server Error");break;default:r.error("Server Error")}a(!1)}};return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(F,{color:"#2468f4",size:"medium",text:"",textColor:""})}):e.jsxs("div",{className:"min-h-screen bg-black py-12 px-4 sm:px-6 lg:px-8",children:[e.jsx(M,{}),e.jsx("div",{className:"h-16"}),e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-300 mb-4",children:"Create Your Story"}),e.jsx("p",{className:"text-lg text-gray-300",children:"Share your thoughts and inspire others"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"from-gray-950 via-slate-950 to-slate-00 rounded-2xl shadow-slate-950 shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-300",children:[e.jsx("button",{onClick:()=>g("write"),className:`flex-1 py-4 px-6 text-center ${p==="write"?"border-b-2 border-indigo-500 text-indigo-600 font-medium":"text-gray-500 hover:text-gray-700"}`,children:"Write"}),e.jsx("button",{onClick:()=>g("preview"),className:`flex-1 py-4 px-6 text-center ${p==="preview"?"border-b-2 border-indigo-500 text-indigo-600 font-medium":"text-indigo-500 hover:text-indigo-400"}`,children:"Preview"})]}),p==="write"?e.jsxs("form",{onSubmit:I,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Cover Image"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-xl hover:border-purple-500 transition duration-150",children:e.jsx("div",{className:"space-y-1 text-center",children:n!=null?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n,alt:"Preview",className:"mx-auto h-64 w-full object-cover rounded-lg"}),e.jsx("input",{id:"dropzone-file",type:"file",onChange:y,accept:"image/*",className:"sr-only"}),e.jsx(G,{size:16,className:"absolute text-white top-0 right-0 mt-2 mr-2 cursor-pointer",onClick:_})]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("div",{className:"flex text-sm text-gray-600",children:[e.jsxs("label",{htmlFor:"image-upload",className:"relative cursor-pointer rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none",children:[e.jsx("span",{children:"Upload a file"}),e.jsx("input",{id:"image-upload",type:"file",className:"sr-only",accept:"image/*",onChange:y})]}),e.jsx("p",{className:"pl-1 text-gray-400",children:"or drag and drop"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"High-quality PNG, JPG up to 10MB"})]})})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-bold font-mono  text-gray-300 mb-1",children:"Title"}),e.jsx("input",{type:"text",id:"title",value:d,onChange:t=>C(t.target.value),className:"block w-full px-4 py-3 bg-black border border-gray-300 rounded-xl text-gray-300 text-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition duration-150",placeholder:"Enter a captivating title...",required:!0}),e.jsx("p",{className:"mt-1 text-bold font-mono text-gray-300",children:"Great titles are short and descriptive (50-60 characters)"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-bold font-mono font-medium text-gray-300 mb-1",children:"Content"}),e.jsx(R,{apiKey:"s73wk7i6fwr11ew23vudqfd79tjyajof2inq6b6qg8a9c9x6",onInit:(t,s)=>E.current=s,value:m,init:{height:500,width:625,menubar:!0,plugins:["advlist","autolink","lists","link","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px; background-color: #000000 !important; color: #ffffff !important; } .mce-content-body { background-color: #000000 !important; } .tox-menubar { background-color: #000000 !important; } .tox-toolbar { background-color: #000000 !important; } .tox-toolbar__primary { background-color: #000000 !important; } .tox-menubar button { color: #ffffff !important; }",skin:"oxide-dark",content_css:"dark",toolbar_bg:"#000000",toolbar_text_color:"#ffffff"},onEditorChange:t=>S(t)})]}),e.jsxs("div",{className:" flex justify-end items-center   pt-5",children:[e.jsxs("button",{disabled:c,type:"submit",className:"mx-12 px-5 py-2.5 relative rounded group  text-white font-medium inline-block",children:[e.jsx("span",{className:"absolute top-0 left-0 w-full h-full rounded opacity-50 filter blur-sm bg-gradient-to-br from-purple-600 to-blue-500"}),e.jsx("span",{className:"h-full w-full inset-0 absolute mt-0.5 ml-0.5 bg-gradient-to-br filter group-active:opacity-0 rounded opacity-50 from-purple-600 to-blue-500"}),e.jsx("span",{className:"absolute inset-0 w-full h-full transition-all duration-200 ease-out rounded shadow-xl bg-gradient-to-br filter group-active:opacity-0 group-hover:blur-sm from-purple-600 to-blue-500"}),e.jsx("span",{className:"absolute inset-0 w-full h-full transition duration-200 ease-out rounded bg-gradient-to-br to-purple-600 from-blue-500"}),e.jsxs("span",{className:"relative",children:[" ",c?"Publishing...":"Publish Story"]})]}),e.jsxs("button",{onClick:P,className:"relative w-36 inline-flex h-12 overflow-hidden rounded-xl p-[1px] focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 focus:ring-offset-slate-50",children:[e.jsx("span",{className:"absolute inset-[-1000%] animate-[spin_2s_linear_infinite] bg-[conic-gradient(from_90deg_at_50%_50%,#E2CBFF_0%,#393BB2_50%,#E2CBFF_100%)] "}),e.jsx("span",{className:"inline-flex tracking-widest h-full w-full cursor-pointer items-center justify-center rounded-xl bg-slate-950 px-3 py-1 text-sm font-medium text-white backdrop-blur-3xl",children:c?"Deleting...":"Delete Story"})]})]})]}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"prose max-w-none",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-300 font-mono  mb-4",children:d||"Your Title Here"}),n!=null&&e.jsx("img",{src:n,alt:"Cover",className:"w-full h-64 object-cover rounded-xl mb-6"}),e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsx("p",{className:"mb-4 text-gray-300 font-mono",dangerouslySetInnerHTML:{__html:q.sanitize(m)}})})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[e.jsx(U,{className:"w-5 h-5 mr-2 text-yellow-500"}),"Writing Tips"]}),e.jsx("button",{onClick:()=>w(!b),className:"text-gray-400 hover:text-gray-600",children:e.jsx(D,{className:"w-5 h-5"})})]}),b&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(u,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Engaging Title"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Keep it clear, specific, and intriguing"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(z,{className:"w-5 h-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Structure"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Use headings and short paragraphs"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(H,{className:"w-5 h-5 text-indigo-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Visual Appeal"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add relevant images to enhance your story"})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Ready to Publish?"}),e.jsxs("ul",{className:"space-y-3 text-sm",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Your story will be shared with our community"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Engage with readers through comments"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Track your story's performance"]})]})]})]})})]})]}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"h-32"}),e.jsx(V,{})]})]})}export{ie as default};
